{"ast":null,"code":"import _objectSpread from\"/Users/regina/Desktop/neobank/neobank/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef}from\"react\";import{useForm}from\"react-hook-form\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Support(){var ref=useRef(null);var _useForm=useForm({mode:\"onBlur\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var onSubmit=function onSubmit(data){fetch(\"http://localhost:8080/email\"/* https://63d23c0c1780fd6ab9bfdcda.mockapi.io/email/email */,{method:\"POST\",body:JSON.stringify(data)}).catch(function(err){if(err){ref.current.innerHTML=\"<p>Something wrong, try again</p>\";localStorage.clear();}});localStorage.setItem(\"email\",true);ref.current.innerHTML=\"<p>You are already subscribed to the bank's newsletter</p>\";reset();};var local=localStorage.getItem(\"email\");useEffect(function(){if(local){ref.current.innerHTML=\"<p>You are already subscribed to the bank's newsletter</p>\";}},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"title-support\",children:\"Support\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle-support\",children:\"Subscribe Newsletter & get\"}),/*#__PURE__*/_jsx(\"p\",{className:\"bank-news\",children:\"Bank News\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"support-form\",ref:ref,children:[/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"email\",type:\"email\",placeholder:\"Your email\"},register(\"email\",{required:true})))}),/*#__PURE__*/_jsx(\"input\",{id:\"btn-support\",className:\"btn-support\",type:\"submit\",value:\"Subscribe\"}),/*#__PURE__*/_jsx(\"div\",{children:(errors===null||errors===void 0?void 0:errors.email)&&/*#__PURE__*/_jsx(\"p\",{children:\"Enter your email\"})})]})]});}export default Support;","map":{"version":3,"names":["React","useEffect","useRef","useForm","Support","ref","mode","register","handleSubmit","errors","formState","reset","onSubmit","data","fetch","method","body","JSON","stringify","catch","err","current","innerHTML","localStorage","clear","setItem","local","getItem","required","email"],"sources":["/Users/regina/Desktop/neobank/neobank/src/components/Support.jsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nfunction Support() {\n  const ref = useRef(null);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n  } = useForm({\n    mode: \"onBlur\",\n  });\n\n  const onSubmit = (data) => {\n    fetch(\n      \"http://localhost:8080/email\" /* https://63d23c0c1780fd6ab9bfdcda.mockapi.io/email/email */,\n      {\n        method: \"POST\",\n        body: JSON.stringify(data),\n      }\n    ).catch((err) => {\n      if (err) {\n        ref.current.innerHTML = \"<p>Something wrong, try again</p>\";\n        localStorage.clear();\n      }\n    });\n\n    localStorage.setItem(\"email\", true);\n    ref.current.innerHTML =\n      \"<p>You are already subscribed to the bank's newsletter</p>\";\n    reset();\n  };\n\n  let local = localStorage.getItem(\"email\");\n  useEffect(() => {\n    if (local) {\n      ref.current.innerHTML =\n        \"<p>You are already subscribed to the bank's newsletter</p>\";\n    }\n  }, []);\n\n  return (\n    <>\n      <p className=\"title-support\">Support</p>\n      <p className=\"subtitle-support\">Subscribe Newsletter & get</p>\n      <p className=\"bank-news\">Bank News</p>\n\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        className=\"support-form\"\n        ref={ref}\n      >\n        <label>\n          <input\n            className=\"email\"\n            type=\"email\"\n            placeholder=\"Your email\"\n            {...register(\"email\", { required: true })}\n          />\n        </label>\n        <input\n          id=\"btn-support\"\n          className=\"btn-support\"\n          type=\"submit\"\n          value=\"Subscribe\"\n        />\n        <div>{errors?.email && <p>Enter your email</p>}</div>\n      </form>\n    </>\n  );\n}\n\nexport default Support;\n"],"mappings":"0HAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAChD,OAASC,OAAO,KAAQ,iBAAiB,CAAC,6IAE1C,QAASC,QAAO,EAAG,CACjB,GAAMC,IAAG,CAAGH,MAAM,CAAC,IAAI,CAAC,CAExB,aAKIC,OAAO,CAAC,CACVG,IAAI,CAAE,QACR,CAAC,CAAC,CANAC,QAAQ,UAARA,QAAQ,CACRC,YAAY,UAAZA,YAAY,CACCC,MAAM,UAAnBC,SAAS,CAAID,MAAM,CACnBE,KAAK,UAALA,KAAK,CAKP,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,IAAI,CAAK,CACzBC,KAAK,CACH,6BAA8B,8DAC9B,CACEC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAC3B,CAAC,CACF,CAACM,KAAK,CAAC,SAACC,GAAG,CAAK,CACf,GAAIA,GAAG,CAAE,CACPf,GAAG,CAACgB,OAAO,CAACC,SAAS,CAAG,mCAAmC,CAC3DC,YAAY,CAACC,KAAK,EAAE,CACtB,CACF,CAAC,CAAC,CAEFD,YAAY,CAACE,OAAO,CAAC,OAAO,CAAE,IAAI,CAAC,CACnCpB,GAAG,CAACgB,OAAO,CAACC,SAAS,CACnB,4DAA4D,CAC9DX,KAAK,EAAE,CACT,CAAC,CAED,GAAIe,MAAK,CAAGH,YAAY,CAACI,OAAO,CAAC,OAAO,CAAC,CACzC1B,SAAS,CAAC,UAAM,CACd,GAAIyB,KAAK,CAAE,CACTrB,GAAG,CAACgB,OAAO,CAACC,SAAS,CACnB,4DAA4D,CAChE,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,wCACE,UAAG,SAAS,CAAC,eAAe,UAAC,SAAO,EAAI,cACxC,UAAG,SAAS,CAAC,kBAAkB,UAAC,4BAA0B,EAAI,cAC9D,UAAG,SAAS,CAAC,WAAW,UAAC,WAAS,EAAI,cAEtC,cACE,QAAQ,CAAEd,YAAY,CAACI,QAAQ,CAAE,CACjC,SAAS,CAAC,cAAc,CACxB,GAAG,CAAEP,GAAI,wBAET,oCACE,4BACE,SAAS,CAAC,OAAO,CACjB,IAAI,CAAC,OAAO,CACZ,WAAW,CAAC,YAAY,EACpBE,QAAQ,CAAC,OAAO,CAAE,CAAEqB,QAAQ,CAAE,IAAK,CAAC,CAAC,EACzC,EACI,cACR,cACE,EAAE,CAAC,aAAa,CAChB,SAAS,CAAC,aAAa,CACvB,IAAI,CAAC,QAAQ,CACb,KAAK,CAAC,WAAW,EACjB,cACF,qBAAM,CAAAnB,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEoB,KAAK,gBAAI,mBAAG,kBAAgB,EAAI,EAAO,GAChD,GACN,CAEP,CAEA,cAAezB,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}